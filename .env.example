# ============================================
# NBM CLOUD v17.0 - Variáveis de Ambiente
# ============================================
# Copie este arquivo para .env e configure os valores

# ============================================
# Ambiente
# ============================================
NODE_ENV=production
PORT=5000
LOG_LEVEL=info

# ============================================
# Banco de Dados PostgreSQL
# ============================================
# Formato: postgresql://usuario:senha@host:porta/banco
DATABASE_URL=postgresql://nbmcloud:sua_senha_segura@localhost:5432/nbmcloud

# Configurações separadas (para docker-compose)
DB_USER=nbmcloud
DB_PASSWORD=sua_senha_segura
DB_NAME=nbmcloud
DB_HOST=localhost
DB_PORT=5432

# ============================================
# Sessão e Segurança
# ============================================
# IMPORTANTE: Gere uma chave segura para produção
# Comando: openssl rand -hex 32
SESSION_SECRET=sua_chave_secreta_muito_longa_e_segura_aqui

# ============================================
# Object Storage
# ============================================
# ID do bucket para armazenamento de backups
DEFAULT_OBJECT_STORAGE_BUCKET_ID=

# Diretórios de armazenamento
PUBLIC_OBJECT_SEARCH_PATHS=public
PRIVATE_OBJECT_DIR=.private

# ============================================
# Autenticação (Replit Auth)
# ============================================
# URL do provedor OpenID Connect
ISSUER_URL=https://replit.com

# ID do Repl (preenchido automaticamente no Replit)
REPL_ID=

# ============================================
# Autenticação (Standalone/Local)
# ============================================
# Para uso sem Replit Auth
STANDALONE_ADMIN_USER=admin
STANDALONE_ADMIN_PASSWORD=admin123

# ============================================
# Object Storage Alternativo (S3/MinIO)
# ============================================
# AWS S3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=nbm-cloud-backups

# MinIO (local/desenvolvimento)
MINIO_ENDPOINT=http://localhost:9000
MINIO_USER=minioadmin
MINIO_PASSWORD=minioadmin

# ============================================
# Redis (Opcional - Cache e Sessões)
# ============================================
REDIS_URL=redis://localhost:6379
REDIS_PORT=6379

# ============================================
# Email (Opcional - Notificações)
# ============================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@nbmcloud.com

# ============================================
# Agentes/Proxies
# ============================================
# Intervalo de heartbeat em segundos
AGENT_HEARTBEAT_INTERVAL=30

# Timeout de conexão SSH em segundos
SSH_TIMEOUT=30

# Máximo de conexões simultâneas por agente
MAX_AGENT_CONNECTIONS=10

# ============================================
# Backups
# ============================================
# Dias para retenção de backups (0 = infinito)
BACKUP_RETENTION_DAYS=90

# Tamanho máximo de arquivo de backup em MB
MAX_BACKUP_SIZE_MB=100

# ============================================
# Performance
# ============================================
# Número máximo de backups simultâneos
MAX_CONCURRENT_BACKUPS=10

# Pool de conexões do banco de dados
DB_POOL_MIN=2
DB_POOL_MAX=10

# ============================================
# Monitoramento (Opcional)
# ============================================
# Sentry DSN para rastreamento de erros
SENTRY_DSN=

# Prometheus metrics endpoint
METRICS_ENABLED=false
METRICS_PORT=9090

# ============================================
# Docker Compose
# ============================================
# Portas para serviços auxiliares
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
